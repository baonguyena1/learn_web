<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 user-menu-item">
    <div class="row">
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <h4>DANH SÁCH SỞ BAN NGÀNH</h4>
      </div>
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 ">
        <!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Tạo tài khoản</button> -->
        <a href="" class="create-org-button" data-toggle="modal" data-target="#createOrg">Tạo cơ quan ban ngành   <span><i class="glyphicon glyphicon-plus"></i></span></a>

      </div>
    </div>
  </div>
  <!-- add alret message -->
  <div  id="info-delete-message" ng-show="alertsMsg" uib-alert ng-class="'alert-' + (alertsMsg.type || 'warning')" dismiss-on-timeout="5000" close="closeAlert($index)">{{alertsMsg.message}}</div>
  <!-- end add alret message -->

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div ng-if="organizations.length > 0" class="row nopadding user-list-scroll aligned-row" infinite-scroll-distance='1' infinite-scroll='loadMoreOrgData()' infinite-scroll-disabled='busy' infinite-scroll-container="'.user-list-scroll'">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 box-organization" ng-repeat="org in organizations">
        <div class="organization">
          <div class="organization-name">
            <a href="" ng-click="viewOrgDetail(org)" href="" data-toggle="modal" data-target="#viewAndUpdateOrg"><strong>{{org.name}}</strong></a>
          </div>
          <div class="organization-address">
            <p> {{org.address}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="viewAndUpdateOrg" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div>
      <div class="modal-header" style="background: white; border: none !important; ">
        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
          <p style="color: green;"><strong>Thông tin cơ quan ban ngành</strong></p>
        </div>
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
      </div>
      <div>
        <form class="form-horizontal popup-form" role="form">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="background: white;">
            <div class="row">
              <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Tên cơ quan</label>
                <div class="col-sm-9">
                  <input userinfo ng-model="organization.name" type='text'>
                </div>
              </div>
              <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Địa chỉ</label>
                <div class="col-sm-9">
                  <input userinfo ng-model="organization.address" type='text'>
                </div>
              </div>
              <div ng-show="message" class="alert alert-info" style="text-align: center;">
                <strong>{{message}}</strong>
              </div>
              <div class="form-group button-update-group">
                <div style="text-align: center;">
                  <button id="remove-org-button" type="submit" class="btn btn-primary submit-button" data-toggle="modal" data-target="#confirmDelete" data-dismiss="modal" >Xóa cơ quan</button>
                  <button style="width: 80px" id="save-user-button" type="submit" class="btn btn-primary submit-button" ng-click="updateOrganizationInfo(organization)">Lưu</button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div id="createOrg" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div>
      <div class="modal-header" style="background: white; border: none !important; ">
        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
          <p style="color: green;"><strong>Thêm mới cơ quan ban ngành</strong></p>
        </div>
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
      </div>
      <div>
        <form class="form-horizontal popup-form" role="form">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="background: white;">
            <div class="row">
              <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Tên cơ quan</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" ng-model="newORG.name" onchange="this.setCustomValidity(validity.valueMissing ? 'Vui lòng nhập tên cơ quan, tổ chức' : '');" id="orgname" required>
                </div>
              </div>
              <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Địa chỉ</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" ng-model="newORG.address" onchange="this.setCustomValidity(validity.valueMissing ? 'Vui lòng nhập tên cơ quan, tổ chức' : '');" id="orgaddress" required>
                </div>
              </div>
              <div ng-show="message" class="alert alert-info" style="text-align: center;">
                <strong>{{message}}</strong>
              </div>
              <div class="form-group button-update-group">
                <div class="col-sm-10 col-sm-offset-2" style="text-align: center;">
                  <button id="remove-org-button" style="width: 80px" type="submit" class="btn btn-primary submit-button" data-dismiss="modal">Hủy</button>
                  <button type="submit" class="btn btn-primary submit-button" ng-click="createNewOrg(newORG)">Tạo mới</button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<div id="confirmDelete" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div>
      <div class="modal-header" style="background: white; border: none !important; ">
        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
          <p style="color: green;"><strong>Bạn có chắc chắn muốn xóa  {{organization.name}}</strong></p>
        </div>
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="background: white;">
          <div class="row">
            <div class="form-group button-update-group">
              <div class="col-sm-10 col-sm-offset-2" style="text-align: center;">
                <button style="width: 80px" type="submit" class="btn btn-primary submit-button" ng-click="deleteNewOrg(organization._id)" data-dismiss="modal">Xóa</button>
                <button type="submit" class="btn btn-primary submit-button" data-toggle="modal" data-target="#viewAndUpdateOrg" data-dismiss="modal">Hủy</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  // $('#viewAndUpdateOrg').modal({
  //   show: false,
  //   backdrop: 'static'
  // })
  document.getElementById("orgname").setCustomValidity("Vui lòng nhập tên cơ quan, tổ chức");
  document.getElementById("orgaddress").setCustomValidity("Vui lòng nhập địa chỉ cơ quan, tổ chức");
</script>
